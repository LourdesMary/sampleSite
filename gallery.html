<!DOCTYPE HTML>
<html>

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- <title>Lourdes.Mary</title> -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <meta name="viewport" content="width=1024"> -->
	<meta name="description" content="some description here." />
	<meta name="keywords"
		content="website templates, html5, template, bootstrap, website template, html5, css3, mobile first, responsive" />
	<meta name="author" content="steffin" />

	<!-- Facebook and Twitter integration -->
	<meta property="og:title" content="" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="" />
	<meta property="og:site_name" content="" />
	<meta property="og:description" content="" />
	<meta name="twitter:title" content="" />
	<meta name="twitter:image" content="" />
	<meta name="twitter:url" content="" />
	<meta name="twitter:card" content="" />

	<!-- <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,700,800" rel="stylesheet">	 -->
	<link href="https://fonts.googleapis.com/css?family=Inconsolata:400,700" rel="stylesheet">

	<!-- Animate.css -->
	<link rel="stylesheet" href="css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="css/icomoon.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="css/bootstrap.css">
	<!-- Flexslider  -->
	<link rel="stylesheet" href="css/flexslider.css">

	<!-- Theme style  -->
	<link rel="stylesheet" href="sass/style.css">

	<!-- Modernizr JS -->
	<script src="js/modernizr-2.6.2.min.js"></script>
	<!-- FOR IE9 below -->
	<!--[if lt IE 9]>
		<script src="js/respond.min.js"></script>
		<![endif]-->

</head>

<body>

	<div class="loumar-loader"></div>

	<div id="page">
		<nav class="loumar-nav" role="navigation">
			<div class="top-menu">
				<div class="container">
					<div class="row">
						<div class="col-xs-2">
							<div id="loumar-logo"><a href="index.html">L<span>&</span>M</a></div>
						</div>
						<div class="col-xs-10 text-right menu-1">
							<ul>
								<li class=""><a href="index.html">Invite</a></li>
								<li class="active"><a href="gallery.html">Gallery</a></li>
								<li><a href="about.html">About</a></li>
							</ul>
						</div>
					</div>

				</div>
			</div>
		</nav>

		<div id="loumar-blog">
			<div class="container">
				<div class="row animate-box">
					<div class="col-md-8 col-md-offset-2 text-center loumar-heading">
						<h2>Help us capture the moment!</h2>
						<p>Use #sobaTakesBaby on instagram and we'll pick up the lot into our gallery <a
								href="gallery.html" target="_blank" rel="noopener noreferrer">here</a>!</p>
						<p>The recent posts are </p>
					</div>
				</div>
				<div class="row" id="top3InstaContainer">

				</div>
			</div>
		</div>


		<footer id="loumar-footer" role="contentinfo">
			<div class="container">
				<div class="row row-pb-md">
					<div class="col-md-4 loumar-widget">
						<h4>Lourdes.Mary</h4>
						<p>We love because he first loved us. <br><span class="loumar-text-muted">1 John 4:19</span></p>
					</div>

				</div>

				<div class="row copyright">
					<div class="col-md-12 text-center">
						<p>
							<small class="block">&copy; 2020 HTML5. All Rights Reserved.</small>
							<small class="block">Designed by <a href="https://steffinrayen.github.io/"
									target="_blank">Mary</a> Developed by <a href="http://lourdesr.github.io/"
									target="_blank">Lourdes</a></small>
						</p>
						<p>
							<ul class="loumar-social-icons">
								<li><a href="#"><i class="icon-twitter"></i></a></li>
								<li><a href="#"><i class="icon-instagram"></i></a></li>
								<li><a href="#"><i class="icon-facebook"></i></a></li>
								<li><a href="#"><i class="icon-linkedin"></i></a></li>
							</ul>
						</p>
					</div>
				</div>

			</div>
		</footer>
	</div>

	<div class="gototop js-top">
		<a href="#" class="js-gotop"><i class="icon-arrow-up22"></i></a>
	</div>

	<!-- jQuery -->
	<script src="js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="js/bootstrap.min.js"></script>
	<!-- Waypoints -->
	<script src="js/jquery.waypoints.min.js"></script>
	<!-- Flexslider -->
	<script src="js/jquery.flexslider-min.js"></script>
	<!-- Main -->
	<script src="js/main.js"></script>
	<script>
		getInstaPhotoByTag("onionsnippets");
		// https://stackoverflow.com/questions/40542335/how-to-get-all-images-of-hashtag-in-instagram-without-api
		String.prototype.trunc = function (n, useWordBoundary) {
			if (this.length <= n) { return this; }
			var subString = this.substr(0, n - 1);
			return (useWordBoundary
				? subString.substr(0, subString.lastIndexOf(' '))
				: subString) + "&hellip;";
		};
		function append(id, tagname, i, thumbnail, caption, userData, likeCount, commentCount, timeStamp, link) {
			var data =
				"<div class='col-md-4'>" +
				"	<div class='loumar-blog animate-box fadeInUp animated-fast'>" +
				"		<a target='_blank' href='" + link + "' class='blog-bg' style='background-image: url(" + thumbnail + ");'></a>" +
				"		<div class='blog-text'>" +
				"			<span class='posted_on'>" + new Date(timeStamp).toDateString() + "</span>" +
				"			<h3><a target='_blank' href='https://www.instagram.com/" + userData.username + "/'>" + userData.full_name + "</a></h3>" +
				"			<p>" + caption.trunc(200, true) + "</p>" +
				"			<ul class='stuff'>" +
				"				<li><i class='icon-heart2'></i>" + likeCount + "</li>" +
				"				<li><i class='icon-chat2'></i>" + commentCount + "</li>" +
				"				<li><a target='_blank' href='" + link + "'>Read More<i class='icon-arrow-right22'></i></a></li>" +
				"			</ul>" +
				"		</div>" +
				"	</div>" +
				"</div>"
			$(id).append(data);
			console.log(data);
		}
		function getInstaPhotoByTag(tagname) {
			$.get("https://www.instagram.com/explore/tags/" + tagname + "/?__a=1", function (data, status) {
				loadPhotos(tagname, data, status);
			});
		}
		function getUserName(id, tagname, i, thumbnail, caption, userId, likeCount, commentCount, timeStamp, link) {
			$.get("https://i.instagram.com/api/v1/users/" + userId + "/info/", function (data, status) {
				console.log(data);
				append(id, tagname, i, thumbnail, caption, data.user, likeCount, commentCount, timeStamp, link);
			});
		}
		function loadPhotos(tagname, data, status) {
			var count = data.graphql.hashtag.edge_hashtag_to_media.edges.length;
			var has_next_page = data.graphql.hashtag.edge_hashtag_to_media.page_info.has_next_page;
			var end_cursor = data.graphql.hashtag.edge_hashtag_to_media.page_info.end_cursor;

			try {
				for (var i = 0; i < count; i++) {
					var $this = data.graphql.hashtag.edge_hashtag_to_top_posts.edges[i].node;
					var caption = $this.edge_media_to_caption.edges[0].node.text;
					var thumbnail = $this.thumbnail_resources[4].src;
					var userId = $this.owner.id;
					console.log($this.owner.id);
					var likeCount = $this.edge_liked_by.count;
					var commentCount = $this.edge_media_to_comment.count;
					var timeStamp = $this.taken_at_timestamp;
					var link = "https://www.instagram.com/p/" + $this.shortcode + "/"
					getUserName("#top3InstaContainer", tagname, i, thumbnail, caption, userId, likeCount, commentCount, timeStamp, link);
				}
				if (has_next_page) {
					getNextPage(tagname, end_cursor);
				}

			} catch (error) {
				if (has_next_page) {
					getNextPage(tagname, end_cursor);
				}

			}
		}
	</script>
</body>

</html>